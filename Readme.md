# API документация для блога

Этот документ описывает методы API для приложения блога. API позволяет создавать, получать, обновлять и удалять посты и комментарии, а также регистрироваться и входить в систему как пользовател

## Общая информация

Базовый URL для всех API запросов: `http://localhost:3006`

Все данные, отправляемые и получаемые через API, находятся в формате JSON.

## Эндпоинты

### `/users`

#### POST /users/register

Регистрация нового пользователя.

**Параметры тела запроса:**

- `username`: имя пользователя (строка, обязательное, от 4 до 20 символов)
- `password`: пароль (строка, обязательное, от 8 до 32 символов, минимум одна заглавная буква, одна строчная буква, одно число или спецсимвол)

**Пример ответа:**

```json
{
  "id": 1,
  "username": "newuser",
  "token": "random_token_string"
}
```

#### POST /users/login

Вход в систему существующего пользователя.

**Параметры тела запроса:**

- `username`: имя пользователя (строка, обязательное)
- `password`: пароль (строка, обязательное)

**Пример ответа:**

```json
{
  "token": "random_token_string"
}
```

### `/posts`

#### GET /posts

Получение списка всех постов.

**Пример ответа:**

```json
[
  {
    "id": 1,
    "title": "Post title",
    "description": "Post description",
    "image": "image.jpg",
    "datetime": "2023-10-09T12:00:00.000Z",
    "user": {
      "id": 1,
      "username": "username"
    },
    "commentCount": 5
  },
  ...
]
```

#### POST /posts

Создание нового поста. Требует аутентификации.

**Параметры тела запроса:**

- `title`: заголовок поста (строка, обязательное)
- `description`: описание поста (строка, необязательное)
- `image`: изображение поста (строка, необязательное)

**Пример ответа:**

```json
{
  "id": 1,
  "title": "Post title",
  "description": "Post description",
  "image": "image.jpg",
  "datetime": "2023-10-09T12:00:00.000Z",
  "user": {
    "id": 1,
    "username": "username"
  }
}
```

#### DELETE /posts/:id

Удаление поста по ID. Требует аутентификации и прав пользователя на удаление этого поста.

**Пример ответа:**

```json
{
  "message": "Post successfully deleted"
}
```

### `/comments`

#### GET /comments/:postId

Получение списка комментариев для поста по его ID.

**Пример ответа:**

```json
[
  {
    "id": 1,
    "text": "Comment text",
    "datetime": "2023-10-09T12:00:00.000Z",
    "user": {
      "id": 1,
      "username": "username"
    },
    "post": {
      "id": 1,
      "title": "Post title",
      ...
    }
  },
  ...
]
```

#### POST /comments

Создание нового комментария для поста. Требует аутентификации.

**Параметры тела запроса:**

- `text`: текст комментария (строка, обязательное)
- `postId`: ID поста (число, обязательное)

**Пример ответа:**

```json
{
  "id": 1,
  "text": "Comment text",
  "datetime": "2023-10-09T12:00:00.000Z",
  "user": {
    "id": 1,
    "username": "username"
  },
  "post": {
    "id": 1,
    "title": "Post title",
       ...
  }
}
```

#### DELETE /comments/:id

Удаление комментария по ID. Требует аутентификации и прав пользователя на удаление этого комментария.

**Пример ответа:**

```json
{
  "message": "Comment successfully deleted"
}
```

## Статусы ответов

- `200 OK`: Запрос успешно обработан.
- `201 Created`: Ресурс успешно создан.
- `204 No Content`: Успешное выполнение запроса, но без возвращаемого контента.
- `400 Bad Request`: Неверный запрос. Сервер не может или не будет обрабатывать запрос из-за чего-то, что воспринимается как ошибка клиента.
- `401 Unauthorized`: Требуется аутентификация. Это статус ответа, который используется, когда страница требует, чтобы пользователь был аутентифицирован и либо клиент не предоставил учетные данные, либо учетные данные недостаточны.
- `403 Forbidden`: У клиента нет прав на выполнение данного действия.
- `404 Not Found`: Запрашиваемый ресурс не найден на сервере.
- `500 Internal Server Error`: На сервере произошла ошибка.